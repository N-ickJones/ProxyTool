server {
    server_name flask.myvenv.club;

     location / {
	 include /etc/nginx/conf.d/cache/cache.config;
         proxy_pass http://unix:/opt/www/ProxyWorld/build/flask/app/app.sock;
     }


#    keepalive_timeout 5;
#    client_max_body_size 4G;
#    access_log /opt/www/ProxyWorld/Django/logs/nginx-access.log;
#    error_log /opt/www/ProxyWorld/Django/logs/nginx-error.log;
    
#    location /static/ {
#        alias /opt/www/ProxyWorld/Django/static/;
#    }

#    location /media/ {
#        alias /opt/www/ProxyWorld/Django/media/;
#    }
    
#    location / {
#        try_files $uri @proxy_to_app;
#    }


#    location @proxy_to_app {
#        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#        proxy_set_header Host $http_host;
#        proxy_redirect off;
#        proxy_pass http://unix:/opt/www/ProxyWorld/Django/myapp.sock;
#    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/research.myvenv.club/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/research.myvenv.club/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


}
server {
    if ($host = flask.myvenv.club) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    server_name flask.myvenv.club;
    listen 80;
    return 404; # managed by Certbot


}
